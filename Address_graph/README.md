# Bitcoin Address Graphs

## Overview

A __(bitcoin) address graph__ is a directed graph whose nodes represent distinct (bitcoin) addresses and whose directed edges represent transaction values. The files in this directory implement functions and classes that allow us to construct such an address graph given blockchain data. Each file is described in more detail in the sections below.

## data_tools.py

This file implements functions that accomplish the following:
* Using the blockchain.info API to retrieve JSON data for a block with a given hash and saving the JSON data to disk.
* Extracting the input addresses, input values, output addresses, and output values from any given transaction.
* Calculating the expected number of Satoshi that an output address receives from each of its input addresses.
* Creating a CSV file that records input address, output address, transaction hash, and transaction value on each line.

## graph_tools.py

This file implements a class for address graphs. Important notes are the following:
* The class inherits methods from the DiGraph class found in the __networkx__ module.
* The class allows an address graph to be built from CSV data (in the form generated by data_tools.py). Each line of the CSV data defines a directed edge between an input address and output address that is weighted by two attributes-- transaction hash and expected transaction value.
* Outside of the class, there are two functions that help to __pickle__ (save to disk) and __unpickle__ (load from disk) address graphs.

## main.py

The files __data_tools.py__ and __graph_tools.py__ contain only functions and classes. The file __main.py__ imports __data_tools.py__ and __graph_tools.py__ as modules and uses them to go through all the steps-- download and save blockchain data, extract and save CSV data, and build and save an address graph. A few simple attributes of the final address graph are then evaluated (e.g., number of nodes).

## Output Files

The files __block.json__, __data.csv__, and __graph__ are generated when __main.py__ is run.

## Question

We know that every transaction in the blockchain defines a complete bipartite graph between its input addresses and output addresses. If we only use one block, then it is possible that an address is involved in very few transactions. The final graph would then be a bunch of bipartite graphs (one per transaction) that are not connected to each other. This would be very boring!

So how could we check otherwise? We would like to find addresses that have both incoming edges and outgoing edges. If we find no such address, then we havent collected enough data. Try it out! (Hint: Look at the methods for in-degree and out-degree mentioned at the end of __main.py__)